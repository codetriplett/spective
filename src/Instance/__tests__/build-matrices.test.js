import { buildMatrices } from '../build-matrices';

describe('build-matrices', () => {
	let properties;

	beforeEach(() => {
		properties = {
			positionX: 1.1,
			positionY: 2.2,
			positionZ: 3.3,
			angleX: 4.4,
			angleY: 5.5,
			angleZ: 6.6,
			offsetX: 7.7,
			offsetY: 8.8,
			offsetZ: 9.9,
			scaleX: 10.01,
			scaleY: 11.11,
			scaleZ: 12.21
		};
	});

	it('should prepare matrices', () => {
		const actual = buildMatrices(properties);

		expect(actual).toEqual([
			[
				1, 0, 0, 0,
				0, 1, 0, 0,
				0, 0, 1, 0,
				1.1, 2.2, 3.3, 1
			], [
				0.9502325919585296, 0.31154136351337786, 0, 0,
				-0.31154136351337786, 0.9502325919585296, 0, 0,
				0, 0, 1, 0,
				0, 0, 0, 1
			], [
				1, 0, 0, 0,
				0, -0.30733286997841935, -0.9516020738895161, 0,
				0, 0.9516020738895161, -0.30733286997841935, 0,
				0, 0, 0, 1
			], [
				0.70866977429126, 0, 0.7055403255703919, 0,
				0, 1, 0, 0,
				-0.7055403255703919, 0, 0.70866977429126, 0,
				0, 0, 0, 1
			], [
				1, 0, 0, 0,
				0, 1, 0, 0,
				0, 0, 1, 0,
				7.7, 8.8, 9.9, 1
			], [
				10.01, 0, 0, 0,
				0, 11.11, 0, 0,
				0, 0, 12.21, 0,
				0, 0, 0, 1
			]
		]);
	});

	it('should prepare inverse matrices', () => {
		const actual = buildMatrices(properties, true);

		expect(actual).toEqual([
			[
				0.0999000999000999, 0, 0, 0,
				0, 0.09000900090009001, 0, 0,
				0, 0, 0.0819000819000819, 0,
				0, 0, 0, 1
			], [
				1, 0, 0, 0,
				0, 1, 0, 0,
				0, 0, 1, 0,
				-7.7, -8.8, -9.9, 1
			], [
				0.9502325919585296, -0.31154136351337786, 0, 0,
				0.31154136351337786, 0.9502325919585296, 0, 0,
				0, 0, 1, 0,
				0, 0, 0, 1
			], [
				1, 0, 0, 0,
				0, -0.30733286997841935, 0.9516020738895161, 0,
				0, -0.9516020738895161, -0.30733286997841935, 0,
				0, 0, 0, 1
			], [
				0.70866977429126, 0, -0.7055403255703919, 0,
				0, 1, 0, 0,
				0.7055403255703919, 0, 0.70866977429126, 0,
				0, 0, 0, 1
			], [
				1, 0, 0, 0,
				0, 1, 0, 0,
				0, 0, 1, 0,
				-1.1, -2.2, -3.3, 1
			]
		]);
	});

	it('should prepare reduced matrices', () => {
		const actual = buildMatrices(properties, true, true);

		expect(actual).toEqual([
			[
				0.9502325919585296, -0.31154136351337786, 0, 0,
				0.31154136351337786, 0.9502325919585296, 0, 0,
				0, 0, 1, 0,
				0, 0, 0, 1
			], [
				1, 0, 0, 0,
				0, -0.30733286997841935, 0.9516020738895161, 0,
				0, -0.9516020738895161, -0.30733286997841935, 0,
				0, 0, 0, 1
			], [
				0.70866977429126, 0, -0.7055403255703919, 0,
				0, 1, 0, 0,
				0.7055403255703919, 0, 0.70866977429126, 0,
				0, 0, 0, 1
			]
		]);
	});
});
